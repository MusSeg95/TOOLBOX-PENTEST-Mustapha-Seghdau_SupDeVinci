# TOOLBOX-PENTEST
Conception d'une toolbox de pentest en Python pour détecter et corriger les failles de sécurité. 


Les modules utilisés sont :

- import tkinter as tk            ## créer des interfaces graphiques en Python. tk simplifie l'appel de la fonction tkinter.

- from tkinter import scrolledtext, messagebox    ## scrolledtext permet d'ajouter une zone de texte avec une barre de défilement intégrée & messagebox affiche des boîtes de dialogue (messages d'alerte, d'erreur, de confirmation...)

- from threading import Thread     ##Thread : exécute des tâches en parallèle
- import socket      ##socket : permet des communications réseau, permettant de créer des connexions client-serveur.
- import os     ## os :  pour interagir avec le système d'exploitation, par exemple pour accéder au système de fichiers, exécuter des commandes système, gérer des fichiers et des répertoires... 
- import wmi      ##wmi : Interface Windows Management Instrumentation, utilisée pour obtenir des informations système et matériel sous Windows
- from tkinter import ttk     ## Fournit des widgets thématiques, plus modernes.
- from tkinter import filedialog    ##filedialog : Utilisé pour ouvrir des boîtes de dialogue de sélection de fichiers ou de répertoires.
- from reportlab.lib.pagesizes import letter   ##letter : Définit la taille de la page pour la génération de PDF.
- from reportlab.pdfgen import canvas   ##canvas : Utilisé pour créer et manipuler des documents PDF.
- import subprocess   ##subprocess : exécute des commandes système depuis le script Python, utile pour exécuter des programmes externes.
- from PIL import Image, ImageTk   ##Image et ImageTk : utilisés pour ouvrir, manipuler et afficher des images dans l'interface Tkinter.
- import time   ##time : Utilisé pour les fonctions de temporisation, pauses, ou pour obtenir l'heure actuelle.
- import hashlib   ##hashlib : Permet de générer des hash pour diverses opérations, comme la vérification d'intégrité des fichiers ou des mots de passe.
- import re   ##utilisé pour la validation et le traitement de chaînes de caractères.  




                                      EXPLICATION DU CODE 1.scan_mustapha_seghdau
___________________________________________________________________________________________________________

Fonction main_window()

Cette fonction définit et configure la fenêtre principale de l'application.

------------------------------------------------------------------------------------------------------------
Fonctions internes à main_window()

scan(ip, scan_type) :

Effectue une analyse réseau en fonction du type d'analyse choisi (Simple, OS, Version, TCP, Scan + Vulnérabilité).
Utilise subprocess.run() pour exécuter des commandes nmap et capture la sortie.

-------------------------------------------------------------------------------------------------------------
generate_pdf(result) :

Génère un fichier PDF avec les résultats de l'analyse en utilisant reportlab.
Demande à l'utilisateur où enregistrer le fichier PDF.

--------------------------------------------------------------------------------------------------------------
action_scan() :

Récupère l'adresse IP et le type d'analyse sélectionné.
Appelle la fonction scan() et met à jour l'interface avec les résultats.


print_report() :

Appelle generate_pdf() pour créer un PDF des résultats de l'analyse.

--------------------------------------------------------------------------------------------------------------
reset_window() :

Réinitialise les champs de saisie et les résultats.

--------------------------------------------------------------------------------------------------------------
start_loading() et stop_loading() :

Gère l'affichage d'un message de chargement pendant les opérations longues.
Création de l'interface graphique

--------------------------------------------------------------------------------------------------------------
Fenêtre principale root :

Configuration de la fenêtre principale (title, background, transparency).

--------------------------------------------------------------------------------------------------------------
Cadre frame :

Un cadre pour organiser les widgets.

--------------------------------------------------------------------------------------------------------------
Étiquettes et champs de saisie :

ip_label et ip_entry pour l'adresse IP.
scan_type_label et scan_type_menu pour le type d'analyse.

--------------------------------------------------------------------------------------------------------------
Boutons :

scan_button pour lancer l'analyse.

--------------------------------------------------------------------------------------------------------------
reset_button pour réinitialiser les champs.

--------------------------------------------------------------------------------------------------------------
print_button pour imprimer le rapport en PDF.

--------------------------------------------------------------------------------------------------------------
result_label pour afficher les résultats de l'analyse.

--------------------------------------------------------------------------------------------------------------


![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/d0caa85f-0467-406f-bccc-7d5db1a53dbd)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/56e57fdd-170b-489b-96ee-b0d224b6a0eb)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/d8f88201-c5fb-4315-ba4d-1a1d9634c468)



 EXPLICATION DU CODE 2.backdoor_mustapha_seghdau
___________________________________________________________________________________________________________

open_main_window2 :

Ferme la fenêtre d'accueil (welcome_window).
Ouvre une nouvelle fenêtre principale en appelant la fonction main_windows2.

-------------------------------------------------------------------------------------------------------------------------------------------

main_windows2 :

Définit plusieurs fonctions et crée une interface graphique pour démarrer un serveur, exécuter des commandes, et générer un rapport en PDF.

---------------------------------------------------------------------------------------------------------------------------------------------

start_server :

Démarre un serveur qui écoute les connexions sur une adresse IP et un port spécifié (ici, le port 4445).
Lorsque le serveur reçoit une commande, il la traite :
Sinon, il exécute la commande reçue et envoie le résultat au client.
Affiche les informations sur les connexions et les commandes dans un widget texte (text_widget).

---------------------------------------------------------------------------------------------------------------------------------------------

start_server_thread :

Lance le serveur dans un thread séparé pour ne pas bloquer l'interface utilisateur.

---------------------------------------------------------------------------------------------------------------------------------------------

start_server_handler :

Récupère l'adresse IP entrée par l'utilisateur et démarre le serveur avec cette adresse.

---------------------------------------------------------------------------------------------------------------------------------------------

execute_ncat :

Exécute le programme ncat avec l'adresse IP entrée par l'utilisateur, permettant de se connecter au serveur.

---------------------------------------------------------------------------------------------------------------------------------------------

execute_code2 :

Utilise la bibliothèque wmi pour obtenir diverses informations système (nom de l'hôte, système d'exploitation, utilisateurs, programmes installés, services, adaptateurs réseau, disques, tâches planifiées).
Affiche ces informations dans le widget texte.

---------------------------------------------------------------------------------------------------------------------------------------------

generate_pdf :

Crée un fichier PDF avec les résultats affichés dans le widget texte.
Utilise la bibliothèque reportlab pour créer le PDF.

---------------------------------------------------------------------------------------------------------------------------------------------

generate_pdf_handler :

Récupère le texte du widget et appelle generate_pdf pour créer le PDF.

---------------------------------------------------------------------------------------------------------------------------------------------


![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/6dcfd5b3-f4c2-4e0e-b470-b8907395086b)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/6b76078a-c093-4335-bdc8-5306cf25d6ca)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/dcd39e37-91f2-4a13-9675-10ce9d0cce95)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/91eca635-97f9-4e72-920a-48fad0b39454)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/92b730c2-dcda-4acb-9d15-9e15b14f6230)


 EXPLICATION DU CODE 3.analysefichier_mustapha_seghdau
___________________________________________________________________________________________________________

open_main_window3() : est une fonction qui détruit la fenêtre de bienvenue (welcome_window) et ouvre la fenêtre principale (main_window3()).

---------------------------------------------------------------------------------------------------------------------------------------------

main_window3() est la fonction principale qui crée une nouvelle fenêtre (root) avec Tkinter, une bibliothèque pour créer des interfaces graphiques en Python.

---------------------------------------------------------------------------------------------------------------------------------------------

l'utilisateur est invité à choisir un répertoire à analyser à l'aide de la boîte de dialogue askdirectory() de la bibliothèque filedialog.

---------------------------------------------------------------------------------------------------------------------------------------------

Deux fichiers sont définis : log_file et malware_hash_file. Le premier est un fichier journal où seront enregistrés les résultats de l'analyse, tandis que le second est un fichier contenant des hachages MD5 de logiciels malveillants.

---------------------------------------------------------------------------------------------------------------------------------------------

get_file_hash_md5() est définie pour calculer le hachage MD5 de chaque fichier dans le répertoire analysé.

---------------------------------------------------------------------------------------------------------------------------------------------

check_malware_hash() est définie pour vérifier si un hachage MD5 correspond à un hachage de logiciel malveillant dans le fichier malware_hash_file.

---------------------------------------------------------------------------------------------------------------------------------------------


(os.walk(drive)): boucle qui parcourt récursivement tous les fichiers dans le répertoire spécifié par l'utilisateur. Pour chaque fichier, plusieurs vérifications sont effectuées pour déterminer s'il est potentiellement malveillant. Ces vérifications incluent :

Vérifier la signature d'authenticité du fichier à l'aide de PowerShell.
Vérifier l'extension du fichier.
Vérifier les attributs du fichier.
Comparer le hachage MD5 du fichier avec ceux des logiciels malveillants.

---------------------------------------------------------------------------------------------------------------------------------------------

Si un fichier est jugé potentiellement malveillant en fonction du nombre de critères remplis, il est signalé dans la console et ajouté au fichier journal log_file.

![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/714a3e68-fca7-4135-abf8-18a17eaf1ab8)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/09fa187f-803f-40f0-9a56-49b1c6ec8560)


EXPLICATION DU CODE 4.decouvertemdp_mustapha_seghdau
___________________________________________________________________________________________________________


LE CODE UTILISE JOHN THE RIPPER POUR HACKER LE MOT DE PASSE D'UN FICHIER ZIP OU D'UN FICHIER RAR : 

---------------------------------------------------------------------------------------------------------------------------------------------

open_main_window4() : Cette fonction est appelée pour ouvrir une nouvelle fenêtre principale. Elle commence par détruire la fenêtre de bienvenue (welcome_window.destroy()) puis appelle la fonction main_windows4() pour créer la nouvelle fenêtre principale.

---------------------------------------------------------------------------------------------------------------------------------------------

main_windows4() : Cette fonction crée une fenêtre principale avec différentes fonctionnalités :

---------------------------------------------------------------------------------------------------------------------------------------------

nom_fichier_entree et nom_fichier_sortie, pour stocker les chemins des fichiers d'entrée et de sortie.

---------------------------------------------------------------------------------------------------------------------------------------------

check_password(): Une fonction vide pour vérifier le mot de passe.

---------------------------------------------------------------------------------------------------------------------------------------------

ouvrir_terminal(): Une fonction pour ouvrir un terminal et exécuter des commandes liées au craquage de mots de passe.

---------------------------------------------------------------------------------------------------------------------------------------------

demander_nom_fichier_entree() et demander_nom_fichier_sortie(): Ces fonctions permettent de demander à l'utilisateur de saisir les noms des fichiers d'entrée et de sortie.

---------------------------------------------------------------------------------------------------------------------------------------------

generate_pdf(result): Cette fonction génère un fichier PDF à partir du résultat affiché dans la zone de texte du terminal.

---------------------------------------------------------------------------------------------------------------------------------------------

generate_pdf_handler(): Un gestionnaire de clic de bouton qui récupère le texte du terminal et le passe à la fonction generate_pdf().

---------------------------------------------------------------------------------------------------------------------------------------------

choisir_format(fichier_format): Une fonction pour choisir le format du fichier à traiter (RAR ou ZIP).

![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/309dbfd5-d30c-44b8-8621-d972109c4300)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/a5624f73-ad84-4052-89e2-656951337cb5)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/c6d03ce2-9071-4f2a-ae2b-709dfc084f12)
![image](https://github.com/MusSeg95/TOOLBOX-PENTEST/assets/166413657/80250ca8-3e39-4b11-bd4b-2495f9680fcf)










